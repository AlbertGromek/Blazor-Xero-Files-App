// <auto-generated/>
#pragma warning disable 1591
#pragma warning disable 0414
#pragma warning disable 0649
#pragma warning disable 0169

namespace BlazorFilesApp.Client.Pages
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "C:\Dev\BlazorFilesApp\BlazorFilesApp\Client\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Dev\BlazorFilesApp\BlazorFilesApp\Client\_Imports.razor"
using System.Net.Http.Json;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Dev\BlazorFilesApp\BlazorFilesApp\Client\_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Dev\BlazorFilesApp\BlazorFilesApp\Client\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Dev\BlazorFilesApp\BlazorFilesApp\Client\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Dev\BlazorFilesApp\BlazorFilesApp\Client\_Imports.razor"
using Microsoft.AspNetCore.Components.Web.Virtualization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\Dev\BlazorFilesApp\BlazorFilesApp\Client\_Imports.razor"
using Microsoft.AspNetCore.Components.WebAssembly.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "C:\Dev\BlazorFilesApp\BlazorFilesApp\Client\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "C:\Dev\BlazorFilesApp\BlazorFilesApp\Client\_Imports.razor"
using BlazorFilesApp.Client;

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "C:\Dev\BlazorFilesApp\BlazorFilesApp\Client\_Imports.razor"
using BlazorFilesApp.Client.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Dev\BlazorFilesApp\BlazorFilesApp\Client\Pages\Associations.razor"
using BlazorFilesApp.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Dev\BlazorFilesApp\BlazorFilesApp\Client\Pages\Associations.razor"
using Xero.NetStandard.OAuth2.Model.Files;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Dev\BlazorFilesApp\BlazorFilesApp\Client\Pages\Associations.razor"
using Xero.NetStandard.OAuth2.Model.Accounting;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Dev\BlazorFilesApp\BlazorFilesApp\Client\Pages\Associations.razor"
using System.Text.Json;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Dev\BlazorFilesApp\BlazorFilesApp\Client\Pages\Associations.razor"
using System.Text;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Dev\BlazorFilesApp\BlazorFilesApp\Client\Pages\Associations.razor"
using System.IO;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\Dev\BlazorFilesApp\BlazorFilesApp\Client\Pages\Associations.razor"
using System.Linq;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "C:\Dev\BlazorFilesApp\BlazorFilesApp\Client\Pages\Associations.razor"
using Microsoft.Extensions.Logging;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "C:\Dev\BlazorFilesApp\BlazorFilesApp\Client\Pages\Associations.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "C:\Dev\BlazorFilesApp\BlazorFilesApp\Client\Pages\Associations.razor"
using System.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 12 "C:\Dev\BlazorFilesApp\BlazorFilesApp\Client\Pages\Associations.razor"
using System.ComponentModel.DataAnnotations;

#line default
#line hidden
#nullable disable
    [Microsoft.AspNetCore.Components.RouteAttribute("/associations")]
    public partial class Associations : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
        }
        #pragma warning restore 1998
#nullable restore
#line 122 "C:\Dev\BlazorFilesApp\BlazorFilesApp\Client\Pages\Associations.razor"
       

    private async Task HandleValidSubmit()
    {
        try
        {
            associations = await Http.GetFromJsonAsync<List<Association>>(string.Format("getassociations/?id={0}", albertId));
        }
        catch (Xero.NetStandard.OAuth2.Client.ApiException e)
        {
            Console.WriteLine(e.Message);
        }
    }

    private Invoice invoice;
    private FileObject file;
    private List<Invoice> invoices;
    private List<FileObject> files;
    public List<Association> associations;
    public Guid invoiceID;
    public Guid fileId;
    public Guid selectedFileId;
    private Guid SelectedFileId
    {
        get
        {
            return selectedFileId;
        }
        set
        {
            ChangeEventArgs selectedEventArgs = new ChangeEventArgs();
            selectedEventArgs.Value = value;
            selectedFileId = value;
            OnAssociationChange(selectedEventArgs);

        }
    }

    public string albertId { get; set; }


    private async Task OnAssociationChange(ChangeEventArgs e)
    {
        associations = await Http.GetFromJsonAsync<List<Association>>(string.Format("getassociations/?id={0}", e.Value));
    }


    private FolderValidation exampleFolder = new FolderValidation();
    public class FolderValidation
    {
        [Required]
        public string Name { get; set; }
    }

    private async Task CreateAssociation()
    {
        invoice = invoices.Where(x => x.InvoiceID == invoiceID).FirstOrDefault();
        var objectType = (ObjectType)Enum.Parse(typeof(ObjectType), invoice.Type.ToString(), true);

        var association = new Association
        {
            ObjectGroup = ObjectGroup.Invoice,
            ObjectType = objectType,
            FileId = fileId,
            ObjectId = invoice.InvoiceID
        };
        await Http.PostAsJsonAsync<Association>("createassociation", association);
        if (fileId == SelectedFileId) { associations.Add(association); }
    }

    private Guid folderId;
    private class File
    {
        public string Name { get; set; }
    }

    private List<Folder> folders;

    protected override async Task OnInitializedAsync()
    {
        files = await Http.GetFromJsonAsync<List<FileObject>>("getfiles");
        var invoicelist = await Http.GetFromJsonAsync<Invoices>("getinvoices");
        invoices = invoicelist._Invoices;
        selectedFileId = files.FirstOrDefault().Id ?? Guid.Empty;

    }

    async Task Delete(Association association)
    {
        bool confirmed = await JsRuntime.InvokeAsync<bool>("confirm", "Are you sure you want to delete the association?");
        if (confirmed)
        {
            Console.WriteLine("Deleting" + association);
            await Http.PostAsJsonAsync<Association>("deleteassociation", association);
            await OnInitializedAsync();
        }
    }

#line default
#line hidden
#nullable disable
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IJSRuntime JsRuntime { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private HttpClient Http { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private ILogger<Files> logger { get; set; }
    }
}
#pragma warning restore 1591
